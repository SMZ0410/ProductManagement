
@{
    ViewBag.Title = "Index";
}

<h2>产品列表</h2>

<div>
    <select id="selTrea" class="text_sketch" style="width:100px;height:30px">
        <option value="0">应用行业</option>
    </select>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    <select id="selAddress" class="text_sketch" style="width:100px;height:30px">
        <option value="0">归属地</option>
    </select>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    <select id="selStage" class="text_sketch" style="width:100px;height:30px">
        <option value="0">产品阶段</option>
    </select><br /><br />
    <select id="selManage" class="text_sketch" style="width:100px;height:30px">
        <option value="0">产品经理</option>
    </select>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    <input id="txtname" type="text" style="width:150px;height:30px" placeholder="请输入产品名称" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

    <input id="Button1" type="button" value="搜索" class="btn btn-primary" onclick="ProductQuery()" /><br /><br />
</div>

<table class="table table-bordered">
    <thead>
        <tr>
            <td>编号</td>
            <td>产品名称</td>
            <td>创建时间</td>
            <td>产品经理</td>
            <td>应用行业</td>
            <td>归属地</td>
            <td>产品阶段</td>
            <td>详情</td>
            <td>操作</td>
        </tr>
    </thead>
    <tbody id="tb"></tbody>
</table>

<script src="~/Scripts/jquery-3.3.1.min.js"></script>

<script>
    $().ready(function () {
        ProductQuery("");
    })

    function ProductQuery(obj) {
        var obj = {
            TreadeName: $("#selTrea").val(),
            AddressName: $("#selAddress").val(), 
            StageName: $("#selStage").val(),
            ProductManage: $("#selManage").val(),
            ProductName:$("#txtname").val()
        }

        $.ajax({
            url: "/Product/GetProducts",
            type: "POST",
            dataType: "json",
            success: function (res) {
                var ts = "";
                $(res.Products).each(function () {
                    ts += "<tr>"
                        + "<td>" + this.ProductId + "</td>"
                        + "<td>" + this.ProductName + "</td>"
                        + "<td>" + this.CreateTime + "</td>"
                        + "<td>" + this.ProductManager + "</td>"
                        + "<td>" + this.TradeName + "</td>"
                        + "<td>" + this.AddressName + "</td>"
                        + "<td>" + this.StageName + "</td>"
                        + "<td>" + this.ProductDetail + "</td>"
                        + "<td><a>删除</a></td>"
                        + "</tr>";
                })
                $("#tb").html(ts);
            }
        })
    }
</script>

